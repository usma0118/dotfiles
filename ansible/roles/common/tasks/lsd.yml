- name: Setup lsd dircolors
  block:
    - name: Install lsd on "Darwin"
      community.general.homebrew:
        name: "{{ item }}"
        state: latest
      with_items:
        - lsd
      when:
        - ansible_os_family == "Darwin"
    - name: Install lsd on "Ubuntu"
      ansible.builtin.package:
        name: lsd
        state: present
      when:
        - ansible_os_family not in ["Darwin", "Windows"]
    - name: Create a directory if it does not exist
      ansible.builtin.file:
        path: "{{ ansible_env.HOME }}/.config/lsd"
        state: directory
        mode: "0755"
    - name: Symlink .dircolors
      ansible.builtin.file:
        src: "{{ ansible_env.HOME }}/.dotfiles/.profile/.dircolors"
        dest: "{{ ansible_env.HOME }}/.config/lsd/.dircolors"
        state: link
        force: true
